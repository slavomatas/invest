<mat-card class="invest-card">
  <!-- Information about portfolio -->
  <div class="portfolio-infobox">
    <div class="portfolio-data">
      <div class=portfolio-data-stats>
        <div class="mat-accent" id="portfolio-name">
            {{portfolioData.name}}
            <sup class="closed" *ngIf=portfolioData.closed>(CLOSED)</sup>
        </div> <!--a ng-href="/portfolio/{{portfolio.id}}/overview">{{portfolio.name}}</a-->
        <div class="portfolio-data-info">
          <div class="portfolio-data-info-left">
            <span>
              ${{portfolioData.marketValue}}
              <span *ngIf="portfolioData.cash == 0; else cash">(NO CASH)</span>
            </span>
            <span>
              <br>${{portfolioData.lastChangeAbs}}&nbsp;
              <span *ngIf="portfolioData.lastChangePct == 0">&#8722;&#8722;</span>
              <span *ngIf="portfolioData.lastChangePct > 0">&#9650;</span>
              <span *ngIf="portfolioData.lastChangePct < 0">&#9660;</span>
                &nbsp;{{portfolioData.lastChangePct}}%
            </span>
          </div>
          <div class="portfolio-data-info-right">
            <div><strong>Strategy:&nbsp;</strong>not supported</div> <!-- not supported by backend yet -->
            <div><strong>Use It As:&nbsp;</strong>not supported</div> <!-- not supported by backend yet -->
          </div>
        </div>
      </div>
      <div class="portfolio-data-positions">
        <ngx-charts-bar-vertical *ngIf="portfolioData.positions != null"
          [view]=""
          [scheme]="colorScheme"
          [results]="chartData"
          [gradient]="gradient"
          [xAxis]="false"
          [yAxis]="false"
          [legend]="false"
          [showXAxisLabel]="showXAxisLabel"
          [showYAxisLabel]="showYAxisLabel"
          [xAxisLabel]=""
          [yAxisLabel]=""
          (select)="onSelect($event)">
        </ngx-charts-bar-vertical>
      </div>
    </div>
    <div class="portfolio-description" *ngIf="portfolioData.description != null">
      <!-- Portfolio description-->
      <p class="inline" *ngIf="portfolioData.description.length > descriptionLimit">
        <strong>Description: </strong>{{portfolioData.description | slice:0:limit}}
        <span class="inline" *ngIf="portfolioData.description.length > limit">
          <a class="inline" (click)="descShowMore()">... More</a>
        </span>
        <span>
          <a class="inline" *ngIf="portfolioData.description.length <= limit"
              (click)="descShowLess()"> Less
          </a>
        </span>
      </p>
      <p class="inline" *ngIf="portfolioData.description.length <= descriptionLimit">
        <strong>Description: </strong>{{portfolioData.description}}
      </p>
    </div>
  </div>
  <!-- Portfolio control buttons -->
  <div class="portfolio-controls">
    <div class="portfolio-control-element">
      <button>
        <span matTooltip="View" matTooltipPosition="above">
          <mat-icon>
            <i class="material-icons" routerLink="/portfolios/{{portfolioData.id}}/overview">visibility</i>
          </mat-icon>
        </span>
      </button>
    </div>
    <div class="portfolio-control-element">
      <button (click)="managePortfolioUpdateOperation(portfolioData)">
        <span matTooltip="Edit" matTooltipPosition="above">
          <mat-icon><i class="material-icons">mode_edit</i></mat-icon>
        </span>
      </button>
    </div>
    <div class="portfolio-control-element">
      <button (click)="managePortfolioCloneOperation(portfolioData)">
        <span matTooltip="Copy" matTooltipPosition="above">
          <mat-icon><i class="material-icons">content_copy</i></mat-icon>
        </span>
      </button>
    </div>
    <div class="portfolio-control-element">
      <button (click)="managePortfolioRemoveOperation(portfolioData)">
        <span matTooltip="Remove" matTooltipPosition="above">
          <mat-icon><i class="material-icons">delete</i></mat-icon>
        </span>
      </button>
    </div>
  </div>  
</mat-card>
<ng-template #cash>({{formatSmallNumber(portfolioData.cash)}})</ng-template>
